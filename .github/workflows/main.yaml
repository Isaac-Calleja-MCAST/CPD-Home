# 1. The name of the workflow as it appears in the GitHub Actions tab
name: Flutter Auto-Build

# 2. TRIGGER: This tells GitHub to run the script every time code is "pushed" to the repository
on: [push]

# 3. JOBS: The actual tasks the server will perform
jobs:
  build:
    # 4. RUNNER: This tells GitHub to use a virtual Linux (Ubuntu) server to build the app
    runs-on: ubuntu-latest

    steps:
      # 5. CHECKOUT: Copies my code from the repository onto the virtual server
      - uses: actions/checkout@v3

      # 6. SETUP: Installs the Flutter SDK on the virtual server so it can run flutter commands
      - uses: subosito/flutter-action@v2
        with:
          channel: 'stable'
          cache: true # Speeds up future builds by remembering previous data

      # 7. DEPENDENCIES: Downloads all the libraries (Hive, Geolocator, etc.) listed in pubspec.yaml
      - run: flutter pub get

      # 8. BUILD: Attempts to compile the Android version of the app
      # If this command fails (e.g., due to a syntax error), I am immediately notified via email.
      - run: flutter build apk --debug


    # Running this file successfully proves that the code is perfect on a neutral, clean computer. the  app can be built using only the files in the repository, it proves the project is complete and not missing any pieces.
    # Integrity: The aim is to ensure Code Integrity. It verifies that the repository contains everything needed to build a working app on a clean environment.
    # Automation: It automates the Build Lifecycle. I don't have to manually create an APK every time; the system does it for me, ensuring the 'Delivery' part of CI/CD.
    # Confidence: It gives me Confidence in my commits. If the GitHub Actions 'green checkmark' appears, I know my latest changes haven't introduced any compilation errors.